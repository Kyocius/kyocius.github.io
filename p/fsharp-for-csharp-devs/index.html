<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Guide for C# devs to learn F# real FAST"><title>å†™ç»™ C# å¼€å‘è€…çš„ F# å…‰é€Ÿå…¥é—¨æ•™ç¨‹</title><link rel=canonical href=https://kyocius.github.io/p/fsharp-for-csharp-devs/><link rel=stylesheet href=/scss/style.min.26f3734476757be60ded5a96146633e6d2efdd397b4a8f48736727c9e436c43d.css><meta property="og:title" content="å†™ç»™ C# å¼€å‘è€…çš„ F# å…‰é€Ÿå…¥é—¨æ•™ç¨‹"><meta property="og:description" content="Guide for C# devs to learn F# real FAST"><meta property="og:url" content="https://kyocius.github.io/p/fsharp-for-csharp-devs/"><meta property="og:site_name" content="æ¸¸å°”æ›¼æ–¯å…‹"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="FSharp Basic"><meta property="article:published_time" content="2022-08-26T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-26T00:00:00+00:00"><meta property="og:image" content="https://kyocius.github.io/p/fsharp-for-csharp-devs/head.png"><meta name=twitter:title content="å†™ç»™ C# å¼€å‘è€…çš„ F# å…‰é€Ÿå…¥é—¨æ•™ç¨‹"><meta name=twitter:description content="Guide for C# devs to learn F# real FAST"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kyocius.github.io/p/fsharp-for-csharp-devs/head.png"><style>:root{--sys-font-family:"Noto Serif SC";--zh-font-family:"Noto Serif SC";--base-font-family:"Noto Serif SC";--article-font-family:"Noto Serif SC"}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/Neki_hu5971c73a93cd34c6a54b40261e8ec7c0_242923_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ²</span></figure><div class=site-meta><h1 class=site-name><a href=/>æ¸¸å°”æ›¼æ–¯å…‹</a></h1><h2 class=site-description>Kyocius</h2></div></header><ol class=social-menu><li><a href=https://github.com/Kyocius target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/kyocius04 target=_blank title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/ target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>ä¸»é¡µ</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>å…³äº</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>å½’æ¡£</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>æ¢æ±‚</span></a></li><li><a href=/%E5%8F%8B%E9%93%BE/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>å‹é“¾</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/fsharp-for-csharp-devs/><img src=/p/fsharp-for-csharp-devs/head_hu7ae8c9477ae0a68f34fbf9d5a3829117_280528_800x0_resize_box_3.png srcset="/p/fsharp-for-csharp-devs/head_hu7ae8c9477ae0a68f34fbf9d5a3829117_280528_800x0_resize_box_3.png 800w, /p/fsharp-for-csharp-devs/head_hu7ae8c9477ae0a68f34fbf9d5a3829117_280528_1600x0_resize_box_3.png 1600w" width=800 height=450 loading=lazy alt="Featured image of post å†™ç»™ C# å¼€å‘è€…çš„ F# å…‰é€Ÿå…¥é—¨æ•™ç¨‹"></a></div><div class=article-details><header class=article-category><a href=/categories/%E7%BC%96%E7%A8%8B/>ç¼–ç¨‹</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/fsharp-for-csharp-devs/>å†™ç»™ C# å¼€å‘è€…çš„ F# å…‰é€Ÿå…¥é—¨æ•™ç¨‹</a></h2><h3 class=article-subtitle>Guide for C# devs to learn F# real FAST</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 26, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 16 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><blockquote><p>æœ¬æ–‡ç¿»è¯‘è‡ªæ‰˜ç®¡åœ¨ GitHub ä¸Šçš„ <a class=link href=https://github.com/knocte/2fsharp target=_blank rel=noopener>2fsharp</a> å¼€æºé¡¹ç›®</p><p>è¯‘ç‰ˆä»…å‘è¡¨åœ¨çŸ¥ä¹å’Œ <a class=link href=https://yoroion.github.io target=_blank rel=noopener>æœ¬äººåšå®¢</a> ä¸Šï¼Œæœªç»æˆæƒ<strong>ç¦æ­¢è½¬è½½</strong></p></blockquote><p>è¿™ä¸ªæ•™ç¨‹æ˜¯åŸºäºå®ä¾‹æ¥è®²è§£çš„ï¼Œå°†ä¼šèŠ±è´¹ä½  15-30 åˆ†é’Ÿçš„æ—¶é—´ã€‚</p><p>ä½ å°†ä¼šå­¦åˆ° F# è¿™é—¨è¯­è¨€ 80% çš„ç‰¹æ€§ï¼</p><h3 id=ä¾‹-1åŸºæœ¬å‡½æ•°å£°æ˜ä¸å®ç°>ä¾‹ 1ï¼šåŸºæœ¬å‡½æ•°å£°æ˜ä¸å®ç°</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=kt>int</span> <span class=n>GiveMeTheLength</span><span class=p>(</span><span class=kt>string</span> <span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å•è¡Œæ³¨é‡Š</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>result</span> <span class=p>=</span> <span class=n>input</span><span class=p>.</span><span class=n>Length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* å¤šè¡Œæ³¨é‡Š */</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å˜æˆäº†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>GiveMeTheLength</span><span class=o>(</span><span class=n>input</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=c1>// å•è¡Œæ³¨é‡Š
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>input</span><span class=o>.</span><span class=n>Length</span>
</span></span><span class=line><span class=cl>    <span class=c>(* å¤šè¡Œæ³¨é‡Š *)</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯é»˜è®¤ä¸º <code>public</code> çš„ï¼Œé™¤éä½ æ˜¾å¼å£°æ˜ <code>private</code> ä¿®é¥°ç¬¦ã€‚</li><li>å…³é”®å­— <code>var</code> å˜æˆäº† <code>let</code>ï¼ˆä¸ä»…ä»…ç”¨æ¥å£°æ˜å˜é‡ï¼Œè¿˜ç”¨æ¥å£°æ˜å‡½æ•°ï¼‰ã€‚</li><li>ä½ ä¸å†éœ€è¦ <code>return</code> å…³é”®å­—ã€‚å‡½æ•°çš„æœ€åä¸€è¡Œå°±æ˜¯è¿”å›å€¼ã€‚</li><li>ä¸å†éœ€è¦èŠ±æ‹¬å·ï¼Œä½¿ç”¨ 4 æ ¼ï¼ˆæˆ–è€… 2 æ ¼ï¼‰ç¼©è¿›ï¼Œå°±åƒ Python ä¸€æ ·ã€‚</li><li>ä¸å†éœ€è¦åˆ†å·æ¥æ ‡å¿—ä¸€è¡Œç»“æŸã€‚</li><li>ç±»å‹å£°æ˜æ˜¯å¯é€‰çš„ï¼Œé™¤äº†æå°‘æ•°æƒ…å†µç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹ã€‚</li><li>å•è¡Œæ³¨é‡Šå’Œ C# ç›¸åŒï¼Œä½†æ˜¯å¤šè¡Œæ³¨é‡Šä½¿ç”¨æ‹¬å·è€Œä¸æ˜¯æ–œæ ã€‚</li></ul><p>å¦‚æœä½ æƒ³è¦å£°æ˜ç±»å‹ï¼Œéœ€è¦è¿™æ ·å†™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>GiveMeTheLength</span><span class=o>(</span><span class=n>input</span><span class=o>:</span> <span class=kt>string</span><span class=o>):</span> <span class=n>int</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>result</span><span class=o>:</span> <span class=n>int</span> <span class=o>=</span> <span class=n>input</span><span class=o>.</span><span class=n>Length</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ä¾‹-2åŸºæœ¬å…³é”®å­—å’Œæ“ä½œç¬¦>ä¾‹ 2ï¼šåŸºæœ¬å…³é”®å­—å’Œæ“ä½œç¬¦</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>System</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MainClass</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>Main</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>exitCode</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>incomingChar</span> <span class=p>==</span> <span class=n>Environment</span><span class=p>.</span><span class=n>NewLine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>exitCode</span> <span class=p>=</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span> <span class=p>(!(</span><span class=n>incomingChar</span> <span class=p>==</span> <span class=n>String</span><span class=p>.</span><span class=n>Empty</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>exitCode</span> <span class=p>=</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>incomingChar</span> <span class=p>!=</span> <span class=s>&#34;\t&#34;</span> <span class=p>&amp;&amp;</span> <span class=n>incomingChar</span><span class=p>.</span><span class=n>Length</span> <span class=p>&gt;</span> <span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>exitCode</span> <span class=p>=</span> <span class=m>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>exitCode</span> <span class=p>=</span> <span class=m>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>Environment</span><span class=p>.</span><span class=n>Exit</span><span class=p>(</span><span class=n>exitCode</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å˜æˆäº†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>open</span> <span class=nn>System</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>mutable</span> <span class=n>exitCode</span><span class=o>:</span> <span class=n>int</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>incomingChar</span> <span class=o>=</span> <span class=nn>Environment</span><span class=p>.</span><span class=n>NewLine</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=n>exitCode</span> <span class=o>&lt;-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=ow>not</span> <span class=o>(</span><span class=n>incomingChar</span> <span class=o>=</span> <span class=nn>String</span><span class=p>.</span><span class=n>Empty</span><span class=o>)</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=n>exitCode</span> <span class=o>&lt;-</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>(</span><span class=n>incomingChar</span> <span class=o>&lt;&gt;</span> <span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span> <span class=o>&amp;&amp;</span> <span class=n>incomingChar</span><span class=o>.</span><span class=n>Length</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=o>)</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=n>exitCode</span> <span class=o>&lt;-</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=n>exitCode</span> <span class=o>&lt;-</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=nn>Environment</span><span class=p>.</span><span class=n>Exit</span><span class=o>(</span><span class=n>exitCode</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>using</code> å…³é”®å­—å˜æˆäº† <code>open</code> å…³é”®å­—ã€‚</li><li><code>if (x) foo(); else if (y) bar(); else baz();</code> æ¨¡å¼å˜æˆäº† <code>if x then foo() elif y then bar() else baz()</code>ï¼Œæ¡ä»¶è¯­å¥ä¹Ÿä¸å†éœ€è¦åœ†æ‹¬å·ã€‚ä½†æ˜¯ä½¿ç”¨äº†æ–°çš„å…³é”®å­— <code>then</code> å’Œ <code>elif</code>ã€‚</li><li>åˆå§‹èµ‹å€¼ï¼ˆåªè¯»å¸¸é‡ï¼‰æ“ä½œç¬¦æ˜¯ <code>=</code>ã€‚å¦‚æœä½ éœ€è¦ä¸ºè¿™ä¸ªå…ƒç´ é‡æ–°èµ‹å€¼ï¼Œä½ éœ€è¦å°†å®ƒæ ‡è®°ä¸º <code>mutable</code> ç„¶åä½¿ç”¨ <code>&lt;-</code> æ“ä½œç¬¦ã€‚</li><li>æ“ä½œç¬¦ <code>=</code> å˜æˆäº†æ¯”è¾ƒç¬¦ï¼ˆä¸å†éœ€è¦åƒ C# é‚£æ ·ä½¿ç”¨åŒç­‰å· <code>==</code> äº†ï¼‰ã€‚</li><li>æ“ä½œç¬¦ <code>!=</code> å˜æˆäº† <code>&lt;></code>ã€‚</li><li>æ“ä½œç¬¦ <code>!</code> å˜æˆäº† <code>not</code>ã€‚</li><li>æ“ä½œç¬¦ <code>&&</code> å’Œ <code>||</code> åœ¨ F# ä¸å˜ã€‚</li><li>ä¸å†éœ€è¦æä¾› Main() æ–¹æ³•è¿™æ ·çš„å…¥å£å‡½æ•°, ç›´æ¥åœ¨ä¸€ä¸ª <code>.fsx</code> æ–‡ä»¶ä¸­ç¼–å†™é€»è¾‘æˆ–è€…ä½¿ç”¨æœ€æ–°çš„ <code>.fs</code> æ–‡ä»¶ä¸­ç¼–å†™è¯­å¥ä»¥æ»¡è¶³ F# ç¼–è¯‘å™¨è¦æ±‚ã€‚</li></ul><p>é€šå¸¸ï¼Œä¸Šé¢çš„ä»£ç å…¶å®ä¸éœ€è¦ä½¿ç”¨ <code>mutable</code>ï¼Œå°±åƒå¦‚ä¸‹å†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>open</span> <span class=nn>System</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>exitCode</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>incomingChar</span> <span class=o>=</span> <span class=nn>Environment</span><span class=p>.</span><span class=n>NewLine</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=ow>not</span> <span class=o>(</span><span class=n>incomingChar</span> <span class=o>=</span> <span class=nn>String</span><span class=p>.</span><span class=n>Empty</span><span class=o>)</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=o>(</span><span class=n>incomingChar</span> <span class=o>&lt;&gt;</span> <span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span> <span class=o>&amp;&amp;</span> <span class=n>incomingChar</span><span class=o>.</span><span class=n>Length</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=o>)</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=mi>4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nn>Environment</span><span class=p>.</span><span class=n>Exit</span><span class=o>(</span><span class=n>exitCode</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>ï¼ˆè¿™å’Œ C# ä¸­çš„ä¸‰å…ƒæ“ä½œç¬¦ç±»ä¼¼ï¼Œä½†æ˜¯å¯è¯»æ€§æ›´é«˜ï¼‰</p><h3 id=ä¾‹-3åŸºç¡€é›†åˆ>ä¾‹ 3ï¼šåŸºç¡€é›†åˆ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>intArray</span> <span class=p>=</span> <span class=k>new</span> <span class=kt>int</span><span class=p>[]</span> <span class=p>{</span> <span class=m>1</span><span class=p>,</span> <span class=m>2</span><span class=p>,</span> <span class=m>3</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>intList</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;({</span> <span class=m>4</span><span class=p>,</span> <span class=m>5</span><span class=p>,</span> <span class=m>6</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=n>IEnumerable</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>sequenceOfIntegers</span> <span class=p>=</span> <span class=n>intList</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>dictionary</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Dictionary</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>string</span><span class=p>&gt;()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s>&#34;One&#34;</span><span class=p>,</span> <span class=m>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s>&#34;Two&#34;</span><span class=p>,</span> <span class=m>2</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å˜æˆäº†å¦‚ä¸‹ä»£ç ï¼ˆå…¶å®ä½ ä¸éœ€è¦å£°æ˜ç±»å‹ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿æ•™å­¦ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>intArray</span><span class=o>:</span> <span class=n>array</span><span class=o>&lt;</span><span class=n>int</span><span class=o>&gt;</span> <span class=o>=</span> <span class=o>[|</span> <span class=mi>1</span><span class=o>;</span> <span class=mi>2</span><span class=o>;</span> <span class=mi>3</span> <span class=o>|]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>intList</span><span class=o>:</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>int</span><span class=o>&gt;</span> <span class=o>=</span> <span class=o>[</span> <span class=mi>4</span> <span class=o>;</span> <span class=mi>5</span> <span class=o>;</span> <span class=mi>6</span> <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>sequenceOfIntegers</span><span class=o>:</span> <span class=n>seq</span><span class=o>&lt;</span><span class=n>int</span><span class=o>&gt;</span> <span class=o>=</span> <span class=n>intList</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>dictionary</span><span class=o>:</span> <span class=n>IDictionary</span><span class=o>&lt;</span><span class=kt>string</span><span class=o>,</span><span class=n>int</span><span class=o>&gt;</span> <span class=o>=</span> <span class=n>dict</span> <span class=o>[</span> <span class=o>(</span><span class=s>&#34;One&#34;</span><span class=o>,</span> <span class=mi>1</span><span class=o>);</span> <span class=o>(</span><span class=s>&#34;Two&#34;</span><span class=o>,</span> <span class=mi>2</span><span class=o>)</span> <span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>å£°æ˜ Array/List/Dictionary æ—¶ï¼Œé€—å·å˜æˆäº†åˆ†å·ã€‚</li><li><code>IEnumerable&lt;T></code> å˜æˆäº† <code>seq&lt;'T></code>ï¼ˆSequence çš„ç¼©å†™ï¼‰ã€‚</li><li>ä½ ä½¿ç”¨ä¸€ä¸ª <code>dict</code> æ¥åˆå§‹åŒ–ä¸€ä¸ª<code>IDictionary&lt;K,V></code> é›†åˆï¼Œä½†æ˜¯åœ¨ F# ä¸­ä½ å°†ä¼šæ›´å€¾å‘äºä½¿ç”¨ <code>Map&lt;'K,'V></code> å› ä¸ºå®ƒæ˜¯å¯å˜çš„ã€‚</li></ul><p>ä½ å¯èƒ½ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œæ³›å‹ç±»å‹éœ€è¦ä¸€ä¸ªå‰ç¼€å•å¼•å·ã€Œ&rsquo;ã€</p><h3 id=ä¾‹-4ä»£ç å—>ä¾‹ 4ï¼šä»£ç å—</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>TrySomething</span><span class=p>(</span><span class=n>someParam</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=n>SomeException</span> <span class=n>ex</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>SomeCondition</span><span class=p>(</span><span class=n>ex</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DoSomethingElse</span><span class=p>(</span><span class=n>ex</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span> <span class=k>new</span> <span class=n>OtherException</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=k>throw</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>MakeSureToCleanup</span><span class=p>(</span><span class=n>someParam</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å˜æˆäº†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>try</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span>
</span></span><span class=line><span class=cl>        <span class=n>TrySomething</span><span class=o>(</span><span class=n>someParam</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=o>:?</span> <span class=n>SomeException</span> <span class=k>as</span> <span class=n>ex</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>SomeCondition</span><span class=o>(</span><span class=n>ex</span><span class=o>)</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=n>DoSomethingElse</span><span class=o>(</span><span class=n>ex</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=n>raise</span> <span class=n>OtherException</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>reraise</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>finally</span>
</span></span><span class=line><span class=cl>    <span class=n>MakeSureToCleanup</span><span class=o>(</span><span class=n>someParam</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>catch</code> å˜æˆäº† <code>with</code> å…³é”®å­—ã€‚</li><li><code>throw X;</code> è¯­å¥å˜æˆäº† <code>raise X</code>ï¼Œç„¶å <code>throw;</code> å˜æˆäº†è°ƒç”¨ <code>reraise()</code> å‡½æ•°ã€‚</li><li>ä½†æ˜¯ï¼Œæ²¡æœ‰ <code>try-with-catch</code> å—ï¼F# åªæœ‰ <code>try-with</code> å’Œ <code>try-finally</code> å—ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½ç”¨ä¸¤ä¸ª <code>try</code> åµŒå¥—ã€‚</li></ul><p>ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™æ˜¯ F# çš„ç¼ºé™·ï¼Œä½†å…¶å®å®Œæ•´çš„ <code>try-catch-finally</code> å—å¾ˆå°‘ç”¨ï¼Œå°¤å…¶æ˜¯æœ‰äº† <code>using</code> å…³é”®å­—ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=p>(</span><span class=kt>var</span> <span class=n>reader</span> <span class=p>=</span> <span class=k>new</span> <span class=n>StreamReader</span><span class=p>(</span><span class=n>someFile</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>DoStuff</span><span class=p>(</span><span class=n>reader</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™å˜æˆäº†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>use</span> <span class=n>reader</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StreamReader</span><span class=o>(</span><span class=n>someFile</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=n>DoStuff</span><span class=o>(</span><span class=n>reader</span><span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>ä½¿ç”¨ <code>use</code> å°±ä¸å†éœ€è¦åµŒå¥—ä»£ç å—äº†ã€‚</li><li>èµ„æºä¼šè‡ªåŠ¨é‡Šæ”¾ï¼ˆå’Œ C# çš„ using ç›¸åŒï¼‰ã€‚</li></ul><h3 id=ä¾‹-5é¿å…-null-å’Œå¿½ç•¥>ä¾‹ 5ï¼šé¿å… Null å’Œå¿½ç•¥</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>Check</span><span class=p>(</span><span class=n>SomeType</span> <span class=n>someParam1</span><span class=p>,</span> <span class=n>SomeType</span> <span class=n>someParam2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>someParam1</span> <span class=p>!=</span> <span class=k>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>stringBuilder</span><span class=p>.</span><span class=n>Append</span><span class=p>(</span><span class=n>someParam1</span><span class=p>.</span><span class=n>ToString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>someParam2</span> <span class=p>!=</span> <span class=k>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>stringBuilder</span><span class=p>.</span><span class=n>Append</span><span class=p>(</span><span class=n>String</span><span class=p>.</span><span class=n>Empty</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å˜æˆäº†</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Check</span><span class=o>(</span><span class=n>someParam1</span><span class=o>:</span> <span class=n>Option</span><span class=o>&lt;</span><span class=n>SomeType</span><span class=o>&gt;,</span> <span class=n>someParam2</span><span class=o>:</span> <span class=n>Option</span><span class=o>&lt;</span><span class=n>SomeType</span><span class=o>&gt;):</span> <span class=kt>unit</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>match</span> <span class=n>someParam1</span> <span class=k>with</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=n>Some</span><span class=o>(</span><span class=n>someValue</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=c1>// like &#39;as&#39; in C#, you cast and want the value
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>let</span> <span class=nv>str</span> <span class=o>=</span> <span class=n>someValue</span><span class=o>.</span><span class=n>ToString</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=n>ignore</span><span class=o>(</span><span class=n>stringBuilder</span><span class=o>.</span><span class=n>Append</span><span class=o>(</span><span class=n>str</span><span class=o>))</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=n>None</span> <span class=o>-&gt;</span> <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>match</span> <span class=n>someParam2</span> <span class=k>with</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=n>Some</span><span class=o>(_)</span> <span class=o>-&gt;</span> <span class=c1>// like &#39;is&#39; in C#, you don&#39;t care about the value
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>stringBuilder</span><span class=o>.</span><span class=n>Append</span><span class=o>(</span><span class=nn>String</span><span class=p>.</span><span class=n>Empty</span><span class=o>)</span> <span class=o>|&gt;</span> <span class=n>ignore</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=o>_</span> <span class=o>-&gt;</span> <span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ C# ä¸­ä½ ç»å¸¸ä¼šåˆ°å¤„å†™åˆ¤ç©ºæ£€æŸ¥ï¼ˆæ²¡æœ‰ç¼–è¯‘æ—¶å®‰å…¨ï¼‰ã€‚åœ¨ F# ä¸­ï¼Œä½ å°†ä½¿ç”¨æ›´å®‰å…¨çš„ <code>Option&lt;T></code> ç±»å‹ï¼ˆä¸<code>Nullable&lt;T></code> ç±»ä¼¼ä½†æ˜¯æ›´æ£’ï¼‰å’Œ <code>match</code> è¡¨è¾¾å¼ï¼ˆæ¨¡å¼åŒ¹é…ï¼‰ã€‚</p><ul><li>å½“ä½ ä¸æƒ³è¿”å›ä»»ä½•ä¸œè¥¿æ—¶ï¼Œåœ¨ C# ä½ ä¼šå†™ <code>void</code> è¡¨ç¤ºæ²¡æœ‰å£°æ˜ç±»å‹ã€‚ä½†æ˜¯åœ¨ F# ä¸­ä½ éœ€è¦è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„ç±» <code>unit</code>ï¼Œå®ƒçš„é»˜è®¤å€¼ä¸º <code>()</code>ã€‚</li><li>ä¸€ä¸ª <code>match-with</code> ä»£ç å—åŸºæœ¬ä¸Šå’Œ switch ä»£ç å—ç±»ä¼¼ï¼Œä½†æ˜¯æ›´åŠ ç®€æ´æ˜äº†ï¼Œå› ä¸ºå®ƒåŒ…å«äº† Castingï¼ˆSomeValueï¼‰</li><li>è¿™é‡Œæœ‰ä¸‰ä¸ªæ–¹å¼æ¥å®ç°å¿½ç•¥ï¼š<ul><li>æ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒ <code>Append()</code> å‡½æ•°çš„è¿”å›å€¼ï¼Œåœ¨ C# ä¸­æˆ‘ä»¬å°±ç›´æ¥å¿½ç•¥ï¼Œä½†æ˜¯åœ¨ F# ä¸­æˆ‘ä»¬éœ€è¦æ˜¾å¼åœ°å¿½ç•¥å®ƒï¼Œä½¿ç”¨ <code>ignore()</code> è¿™ä¸ªé­”æ³•æ–¹æ³•ã€‚</li><li>Match è¡¨è¾¾å¼çš„ä¸‹åˆ’çº¿ï¼šå®ƒå°±åƒ C# çš„ <code>switch</code> ä¸­çš„ <code>default</code> åˆ†æ”¯ã€‚</li><li>åœ¨ <code>Some(_)</code> ä¸­çš„ä¸‹åˆ’çº¿è¡¨ç¤ºï¼Œæˆ‘ä»¬æƒ³ä¿è¯ä¸€ä¸ªå€¼ä¸æ˜¯ç©ºï¼Œä½†æˆ‘ä»¬åˆä¸å…³å¿ƒå®ƒçš„å…·ä½“å€¼ï¼ˆå°±åƒ C# ä¸­çš„ <code>is</code> æ“ä½œç¬¦ï¼‰ã€‚</li></ul></li><li>ç®¡é“æ“ä½œç¬¦ï¼š<code>ignore(x)</code> ä¸ <code>x |> ignore</code> ç­‰ä»·ã€‚</li></ul><h3 id=ä¾‹-6ç±»å‹>ä¾‹ 6ï¼šç±»å‹</h3><p>ä¸‹é¢è¿™ä¸ªç±»ä½¿ç”¨ F# å°±ç®€å•å¾ˆå¤šã€‚</p><p>ï¼ˆè¯‘è€…æ³¨ï¼šå…¶å®å¯ä»¥ä½¿ç”¨ C# 6.0 çš„è‡ªåŠ¨å®Œæˆå±æ€§æˆ–è€… C# 9.0 çš„è®°å½•ç±»ï¼‰</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>Foo</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>Foo</span> <span class=p>(</span><span class=kt>int</span> <span class=n>bar</span><span class=p>,</span> <span class=kt>string</span> <span class=n>baz</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>bar</span> <span class=p>=</span> <span class=n>bar</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>baz</span> <span class=p>=</span> <span class=n>baz</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>readonly</span> <span class=kt>int</span> <span class=n>bar</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>int</span> <span class=n>Bar</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>get</span> <span class=p>{</span> <span class=k>return</span> <span class=n>bar</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>readonly</span> <span class=kt>string</span> <span class=n>baz</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>Baz</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>get</span> <span class=p>{</span> <span class=k>return</span> <span class=n>baz</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>FooFactory</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>internal</span> <span class=n>Foo</span> <span class=n>CreateFoo</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Foo</span><span class=p>(</span><span class=m>42</span><span class=p>,</span> <span class=s>&#34;forty-two&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ F# ä¸­å°±ä¸€è¡Œï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>type</span> <span class=nc>Foo</span> <span class=o>=</span> <span class=o>{</span> <span class=n>Bar</span><span class=o>:</span> <span class=n>int</span><span class=o>;</span> <span class=n>Baz</span><span class=o>:</span> <span class=kt>string</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>module</span> <span class=nn>FooFactory</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>internal</span> <span class=n>CreateFoo</span> <span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=o>{</span> <span class=n>Bar</span> <span class=o>=</span> <span class=mi>42</span><span class=o>;</span> <span class=n>Baz</span> <span class=o>=</span> <span class=s>&#34;forty-two&#34;</span> <span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç”±æ­¤å¯è§:</p><ul><li>æ²¡æœ‰åŠ¨ä½œè¡Œä¸ºçš„ç±»ï¼ˆå°±åƒä¸Šé¢çš„ Foo ç±»ï¼‰å«ä½œã€Œè®°å½•ç±» Recordã€ï¼Œé•¿å¾—åƒ C# çš„ç»“æ„ä½“ä½†æ˜¯å®ƒä»¬ä¾ç„¶æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¹¶ä¸”è¢«ä¿å­˜åœ¨å †ä¸Šã€‚è®°å½•ç±»æ˜¯ä¸å¯å˜çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä½ åˆ›å»ºå®ƒä»¬ï¼Œå°±ä¸èƒ½å†ä¿®æ”¹å®ƒä»¬çš„å€¼äº†ã€‚</li><li>é™æ€ç±»å˜æˆäº†ã€Œmodulesã€ï¼Œå¦‚ä¸Š <code>FooFactory</code> ç±»ã€‚</li><li>åœ¨ F# ä¸­ï¼Œä¸éœ€è¦ä½¿ç”¨ <code>new</code> å…³é”®å­—ï¼Œé™¤éè¿™ä¸ªç±»å®ç°äº† <code>IDisposable</code> æ¥å£ã€‚</li></ul><h3 id=ä¾‹-7å‡½æ•°çš„é¡ºåºå¾ˆé‡è¦å¾ªç¯ä¾èµ–æ˜¯ä¸‡æ¶ä¹‹æº>ä¾‹ 7ï¼šå‡½æ•°çš„é¡ºåºå¾ˆé‡è¦ï¼Œå¾ªç¯ä¾èµ–æ˜¯ä¸‡æ¶ä¹‹æº</h3><p>ä½œä¸º C# å¼€å‘è€…ï¼Œä½ å½“ç„¶çŸ¥é“ä¸‹é¢çš„ä»£ç å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>Foo</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>Bar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>Baz</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=n>Bar</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=kt>bool</span> <span class=n>Baz</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç†æ‰€åº”å½“ï¼ä¸‹é¢çš„ä»£ç ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>Foo1</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>void</span> <span class=n>Bar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>Baz</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Foo2</span><span class=p>.</span><span class=n>Baz</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>Foo2</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>Bar</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Foo1</span><span class=p>.</span><span class=n>Bar</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>void</span> <span class=n>Baz</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¹Ÿè®¸ä½ æ˜ç™½æˆ‘è¯´åˆ°å“ªé‡Œäº†ã€‚</p><p>åä¸€æ®µ C# ä»£ç å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œæ˜¯å› ä¸º C# å…è®¸å¾ªç¯ä¾èµ–ï¼ˆCircular Dependenciesï¼‰ã€‚</p><p>ä½†æ˜¯è¿™å¥è¯åŠå¯¹åŠé”™ï¼Œå› ä¸ºåœ¨ C# ä¸­å¾ªç¯ä¾èµ–æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯åœ¨ .NET ç¨‹åºé›†é‡Œä¸åˆæ³•ã€‚å¦‚æœç¨‹åºé›† A ä¾èµ–äºç¨‹åºé›† Bï¼Œä½ ä¸èƒ½ä» A å¼•ç”¨ Bã€‚</p><p>è¿™ä¸ªæ¨¡å—æ€§åŸåˆ™å°†ä¼šé˜»æ­¢ä½ å†™å‡ºä¸Šé¢çš„ä»£ç ï¼Œå› ä¸ºåœ¨æœªæ¥ä½ å°†ä¸èƒ½å°†å®ƒä»¬åˆ†ä¸ºä¸¤ä¸ªç¨‹åºé›†ï¼ˆä½ ä¸èƒ½å°† Foo1 æ”¾è¿›ä¸€ä¸ªç¨‹åºé›†é‡Œï¼Œç„¶åæŠŠ Foo2 æ”¾è¿›å¦ä¸€ä¸ªç¨‹åºé›†ï¼Œå› ä¸ºåœ¨ .NET ä¸­è¿™å¹¶ä¸åˆæ³•ï¼‰ã€‚</p><p>ä¹‹åï¼Œä½ éœ€è¦äº†è§£çš„æ˜¯ï¼Œåœ¨ F# ä¸­ï¼Œå³ä½¿åœ¨åŒä¸€ç¨‹åºé›†é‡Œï¼Œå¾ªç¯ä¾èµ–<strong>ä¹Ÿä¸åˆæ³•</strong>ï¼</p><p>é€šè¿‡å¼ºåˆ¶ä½ åœ¨ç±»å‹ B ä¹‹å‰å£°æ˜ ç±»å‹ Aï¼Œé˜²æ­¢ä½ åœ¨ä¹‹åçš„å‡½æ•°ä¸­è°ƒç”¨å‰é¢çš„å‡½æ•°æ—¶å‡ºé”™ã€‚</p><p>å› æ­¤ï¼Œä¸‹é¢çš„ F# ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>module</span> <span class=nn>Foo1</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Bar</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Baz</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=nn>Foo2</span><span class=p>.</span><span class=n>Baz</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>module</span> <span class=nn>Foo2</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Bar</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=nn>Foo1</span><span class=p>.</span><span class=n>Bar</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Baz</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¥çœ‹çœ‹å®ƒçš„æŠ¥é”™ï¼š</p><ul><li>Error FS0039: The value, namespace, type or module &lsquo;Foo2&rsquo; is not defined. (Referring to Foo1.Baz implementation.)</li></ul><p>è¿™ä¸ªæŠ¥é”™æ˜¯ä¸èƒ½ä¿®å¤çš„ï¼Œé™¤éæˆ‘ä»¬ç›´æ¥åœæ­¢ä½¿ç”¨å¾ªç¯ä¾èµ–ã€‚</p><p>ï¼ˆè¿˜æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ä½¿ç”¨ <code>via</code> å’Œ <code>rec</code> å…³é”®å­—ï¼Œä½†æ˜¯åœ¨æœ¬æ•™ç¨‹ä¸­å¹¶ä¸ä¼šè®²è§£ï¼Œå› ä¸ºå¤ªé«˜çº§äº†ï¼‰</p><p>F# ç¼–è¯‘å™¨ä¸¥æ ¼é™åˆ¶äº†æˆ‘ä»¬ä¸èƒ½å¾ªç¯ä¾èµ–ï¼Œè¿™æ„å‘³ç€å¦‚æœå‡½æ•° A è°ƒç”¨äº†å‡½æ•° Bï¼Œé‚£ä¹ˆå‡½æ•° B å°±å¿…é¡»åœ¨ A ä¹‹å‰å£°æ˜</p><p>ï¼ˆå¦‚æœè¿™ä¸¤ä¸ªå‡½æ•°åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå‡½æ•° B å°±æ˜¯åœ¨å‡½æ•° A ä¸Šé¢ï¼›å¦‚æœè¿™ä¸¤ä¸ªå‡½æ•°åœ¨åŒä¸€ F# å·¥ç¨‹ä¸‹ä¸åŒæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆ <code>B.fs</code> å¿…é¡»æ¯” <code>A.fs</code> æ—©åˆ—å‡ºï¼‰</p><p>å› æ­¤ï¼Œä¸‹é¢çš„ä»£ç ä¹Ÿä¸ä¼šé€šè¿‡ç¼–è¯‘ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>module</span> <span class=nn>Foo</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Bar</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>Baz</span><span class=bp>()</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=n>Bar</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Baz</span><span class=bp>()</span><span class=o>:</span> <span class=kt>bool</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>false</span>
</span></span></code></pre></td></tr></table></div></div><p>å®ƒæŠ›å‡ºäº†å¦‚ä¸‹é”™è¯¯ï¼š</p><ul><li>Error FS0039: The value or constructor &lsquo;Baz&rsquo; is not defined. (Referring to Foo.Bar implementation.)</li><li>Error FS0039: The value or constructor &lsquo;Bar&rsquo; is not defined. (Referring to Foo.Bar implementation.)</li></ul><p>æ­£å¦‚æˆ‘ä»¬åˆšåˆšå­¦åˆ°çš„ï¼Œè¿™æ›´å®¹æ˜“è§£å†³ï¼›åªè¦å…ˆå£°æ˜ <code>Baz</code> å³å¯ã€‚</p><p>è€Œä¸ºäº†è®©ä¸€ä¸ªå‡½æ•°èƒ½å¤Ÿè°ƒç”¨è‡ªå·±ï¼ˆåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¾ªç¯ä¾èµ–ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>rec</code> å…³é”®å­—ï¼ˆæ„æ€å°±æ˜¯ã€Œé€’å½’ã€)ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>module</span> <span class=nn>Foo</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Baz</span><span class=bp>()</span><span class=o>:</span> <span class=kt>bool</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>rec</span> <span class=n>Bar</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>Baz</span><span class=bp>()</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=n>Bar</span><span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ä¾‹-8å§”æ‰˜åŒ¿åå‡½æ•°æˆ‘çš„è€å¤©çˆ·>ä¾‹ 8ï¼šå§”æ‰˜ã€åŒ¿åå‡½æ•°Â·Â·Â·æˆ‘çš„è€å¤©çˆ·ï¼</h3><p>åœ¨ C# çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œéœ€è¦é€šè¿‡å§”æ‰˜ç±»å‹å’ŒåŒ¿åå‡½æ•°ä¼ é€’å‡½æ•°ã€‚è¯·çœ‹ä¸‹é¢æœ‰ 4 ç§ç»„åˆçš„ä¾‹å­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>SomeOldCsharpClass</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>delegate</span> <span class=k>void</span> <span class=n>ProcedureWithNoReturnValueAndNoArguments</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>DelegateReception1</span><span class=p>(</span><span class=n>ProcedureWithNoReturnValueAndNoArguments</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate1</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception1</span><span class=p>(</span><span class=k>delegate</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 1&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>delegate</span> <span class=k>void</span> <span class=n>ProcedureWithNoReturnValueAndOneArg</span><span class=p>(</span><span class=kt>string</span> <span class=n>foo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>DelegateReception2</span><span class=p>(</span><span class=n>ProcedureWithNoReturnValueAndOneArg</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=n>bar</span> <span class=p>=</span> <span class=s>&#34;baz&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>(</span><span class=n>bar</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate2</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception2</span><span class=p>(</span><span class=k>delegate</span> <span class=p>(</span><span class=kt>string</span> <span class=n>foo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 2 &#34;</span> <span class=p>+</span> <span class=n>foo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>delegate</span> <span class=kt>int</span> <span class=n>FunctionWithOneReturnValueAndNoArguments</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>DelegateReception3</span><span class=p>(</span><span class=n>FunctionWithOneReturnValueAndNoArguments</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>result</span> <span class=p>=</span> <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate3</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception3</span><span class=p>(</span><span class=k>delegate</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 3&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>delegate</span> <span class=kt>long</span> <span class=n>FunctionWithOneReturnValueAndOneArg</span><span class=p>(</span><span class=kt>double</span> <span class=n>foo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>DelegateReception4</span><span class=p>(</span><span class=n>FunctionWithOneReturnValueAndOneArg</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>double</span> <span class=n>bar</span> <span class=p>=</span> <span class=m>4.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>long</span> <span class=n>result</span> <span class=p>=</span> <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>(</span><span class=n>bar</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate4</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception4</span><span class=p>(</span><span class=k>delegate</span> <span class=p>(</span><span class=kt>double</span> <span class=n>foo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 4 &#34;</span> <span class=p>+</span> <span class=n>foo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½†åæ¥æ–°ç‰ˆæœ¬çš„ C# å‡ºç°äº†æ›´ä¼˜é›…çš„æ–¹å¼ï¼ˆå¾—ç›Šäºå±€éƒ¨å‡½æ•°ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>SomeNewCsharpClass</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate1</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>void</span> <span class=n>DelegateReception1</span><span class=p>(</span><span class=n>Action</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception1</span><span class=p>(()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 1&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate2</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>void</span> <span class=n>DelegateReception2</span><span class=p>(</span><span class=n>Action</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>string</span> <span class=n>bar</span> <span class=p>=</span> <span class=s>&#34;baz&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>(</span><span class=n>bar</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception2</span><span class=p>((</span><span class=kt>string</span> <span class=n>foo</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 2 &#34;</span> <span class=p>+</span> <span class=n>foo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate3</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>void</span> <span class=n>DelegateReception3</span><span class=p>(</span><span class=n>Func</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>result</span> <span class=p>=</span> <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception3</span><span class=p>(()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 3&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>void</span> <span class=n>SendingAnonymousMethodAsDelegate4</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>void</span> <span class=n>DelegateReception4</span><span class=p>(</span><span class=n>Func</span><span class=p>&lt;</span><span class=kt>double</span><span class=p>,</span> <span class=kt>long</span><span class=p>&gt;</span> <span class=n>dlg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>double</span> <span class=n>bar</span> <span class=p>=</span> <span class=m>4.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=kt>long</span> <span class=n>result</span> <span class=p>=</span> <span class=n>dlg</span><span class=p>.</span><span class=n>Invoke</span><span class=p>(</span><span class=n>bar</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception4</span><span class=p>((</span><span class=kt>double</span> <span class=n>foo</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;hello 4 &#34;</span> <span class=p>+</span> <span class=n>foo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=m>4</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€æœ‰è¶£çš„æ”¹è¿›å°±æ˜¯ .NET é¢„å®šä¹‰çš„ <code>Action</code> å’Œ <code>Func</code> ç±»å‹ï¼Œä»¥åŠ Lambda è¡¨è¾¾å¼ã€‚</p><p>å¥½æ¶ˆæ¯æ˜¯åœ¨ F# ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ã€‚å› æ­¤ä»£ç æ›´åŠ ç®€å•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>module</span> <span class=nn>SomeFsharpModule</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate1</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception1</span><span class=o>(</span><span class=n>dlg</span><span class=o>:</span> <span class=kt>unit</span><span class=o>-&gt;</span><span class=kt>unit</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=n>dlg</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception1</span><span class=o>(</span><span class=k>fun</span> <span class=o>_</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;hello 1&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate2</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception2</span><span class=o>(</span><span class=n>dlg</span><span class=o>:</span> <span class=kt>string</span><span class=o>-&gt;</span><span class=kt>unit</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>bar</span> <span class=o>=</span> <span class=s>&#34;baz&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>dlg</span><span class=o>(</span><span class=n>bar</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception2</span><span class=o>(</span><span class=k>fun</span> <span class=n>bar</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;hello 2 &#34;</span> <span class=o>+</span> <span class=n>bar</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate3</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception3</span><span class=o>(</span><span class=n>dlg</span><span class=o>:</span> <span class=kt>unit</span><span class=o>-&gt;</span><span class=n>int</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>dlg</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception3</span><span class=o>(</span><span class=k>fun</span> <span class=o>_</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;hello 3&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate4</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception4</span><span class=o>(</span><span class=n>dlg</span><span class=o>:</span> <span class=kt>double</span><span class=o>-&gt;</span><span class=kt>int64</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>bar</span> <span class=o>=</span> <span class=mi>4</span><span class=o>.</span><span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>dlg</span><span class=o>(</span><span class=n>bar</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception4</span><span class=o>(</span><span class=k>fun</span> <span class=n>bar</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;hello 4 &#34;</span> <span class=o>+</span> <span class=n>bar</span><span class=o>.</span><span class=n>ToString</span><span class=bp>()</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=kt>int64</span><span class=o>(</span><span class=mi>4</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼ŒBCL çš„ <code>System.Function</code> å’Œ <code>System.Action</code> å˜æˆäº†åŸç”Ÿ F# è¯­æ³•ã€‚</p><p>é€šè¿‡ <code>-></code> ç¬¦å·æ¥è¡¨ç¤ºå‚æ•°å’Œè¿”å›å€¼ï¼Œä¾‹å¦‚ <code>TArg1->TResult</code>ã€‚è¯·è®°ä½ï¼Œ<code>void</code> åœ¨ F# ä¸­æ˜¯ <code>unit</code>ã€‚</p><p>åŒæ ·é‡è¦çš„æ˜¯ï¼ŒC# çš„ <code>(...) => { ... }</code> å˜æˆäº† <code>fun ... -> ...</code></p><h3 id=ä¾‹-9å…ƒç»„å±€éƒ¨åº”ç”¨ä»¥åŠæŸ¯é‡ŒåŒ–>ä¾‹ 9ï¼šå…ƒç»„ã€å±€éƒ¨åº”ç”¨ä»¥åŠæŸ¯é‡ŒåŒ–</h3><p>å¦‚æœä½ æ²¡æœ‰åšè¿‡å‡½æ•°å¼ç¼–ç¨‹ï¼Œä½ å¯èƒ½ä¼šå¯¹å…¶ä¸­çš„ä¸€äº›æ¦‚å¿µæ„Ÿåˆ°å®³æ€•ï¼Œæ¯”å¦‚ã€Œå±€éƒ¨åº”ç”¨ Partial Applicationã€ã€ŒæŸ¯é‡ŒåŒ– Currificationã€ã€‚</p><p>ä½†äº‹å®æ˜¯ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯é‚£ä¹ˆå¤æ‚çš„æ¦‚å¿µã€‚ä¸ºäº†æ­£ç¡®è§£é‡Šå®ƒä»¬ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè§£é‡Šå…ƒç»„ï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸å»ºè®®åœ¨ F# ä¸­æ»¥ç”¨å®ƒä»¬ã€‚</p><p>ï¼ˆäº‹å®ä¸Šï¼Œä½ ä¸èƒ½ç”¨å…ƒç»„æ¥ä½¿ç”¨å±€éƒ¨åº”ç”¨ï¼ç¨åå°†è¯¦ç»†ä»‹ç»ï¼‰</p><p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹ä¸‹é¢è¿™æ®µä½¿ç”¨ <code>out</code> å‚æ•°çš„ C# ä»£ç ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>int</span> <span class=n>anInteger</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=kt>int</span><span class=p>.</span><span class=n>TryParse</span><span class=p>(</span><span class=n>someString</span><span class=p>,</span> <span class=k>out</span> <span class=n>anInteger</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>DoSomethingWithAnInteger</span><span class=p>(</span><span class=n>anInteger</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>DoSomethingElse</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœä½ å°è¯•å°†ä¸Šé¢çš„ C# ä»£ç è½¬è¯‘æˆ F#ï¼Œä½ é¦–å…ˆä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼šæˆ‘ä»¬æ€æ ·å£°æ˜ä¸€ä¸ªå˜é‡ä½†ä¸ç»™å®ƒèµ‹å€¼å‘¢ï¼Ÿç›¸ä¿¡æˆ‘ï¼ŒF# æ˜¯ä¸å¯èƒ½åšåˆ°çš„ã€‚</p><p>ä½ å¯èƒ½ä¼šæƒ³åˆ°å…ˆéšä¾¿ç»™å˜é‡ <code>anInteger</code> èµ‹ä¸€ä¸ªå€¼ï¼Œåæ­£æœ€åä¼šè¢« <code>TryParse()</code> æ–¹æ³•è¦†å†™ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¸å¤Ÿä¼˜é›…ï¼Œå°¤å…¶æ˜¯æŠŠå˜é‡æ ‡è®°ä¸º <code>mutable</code>ï¼Œä¸ç¬¦åˆ F# çš„è¯­è¨€ä¹ æƒ¯ã€‚</p><p>æœ€å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ã€Œç§¯ææ¨¡å¼ Acitve Patternã€â€”â€”å°†ä¸Šé¢å¤šä¸ªå‡½æ•°è½¬æ¢æˆä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åŒæ—¶è™šæ‹Ÿåœ°è¿”å›ä¸¤ä¸ªå€¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>match</span> <span class=n>int</span><span class=o>.</span><span class=n>TryParse</span><span class=o>(</span><span class=n>someString</span><span class=o>)</span> <span class=k>with</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>(</span><span class=k>true</span><span class=o>,</span> <span class=n>anInteger</span><span class=o>)</span> <span class=o>-&gt;</span> <span class=n>DoSomethingWithAnInteger</span><span class=o>(</span><span class=n>anInteger</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=o>(</span><span class=k>false</span><span class=o>,</span> <span class=o>_)</span> <span class=o>-&gt;</span> <span class=n>DoSomethingElse</span><span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><p>ç§¯ææ¨¡å¼ä¸º F# ç¼–è¯‘å™¨æä¾›äº†è¯­æ³•ç³–ï¼Œå°† <code>bool TryParse(string,out int)</code> è½¬æ¢æˆäº†ç±»ä¼¼ <code>(bool,int) TryParse(string)</code> çš„å‡½æ•°ï¼Œè€Œ <code>(bool,int)</code> æ˜¯ä¸€ä¸ªå…ƒç»„ï¼</p><p>æ‰€ä»¥åœ¨ F# ä¸­ï¼Œåˆ›å»ºä»»æ„é•¿åº¦çš„å…ƒç»„æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œä¸éœ€è¦ä½¿ç”¨ <code>System.Tuple&lt;X,Y,...></code>ã€‚</p><p>è¿™è®©æˆ‘æƒ³èµ·äº†æ–°ç‰ˆæœ¬ C# å¯¹äºå…ƒç»„çš„æ”¹è¿›â€”â€”ä½ å¯ä»¥åœ¨å‡½æ•°çš„ç­¾åé‡Œä½¿ç”¨å…ƒç»„è€Œä¸éœ€è¦ç”¨ <code>Tuple</code>ã€‚</p><p>æ¥æ£€æŸ¥ä¸€ä¸‹æˆ‘è¯´çš„æ˜¯ä»€ä¹ˆæ„æ€å§ã€‚è¿™æ˜¯ C# çš„è€å¼å†™æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>bool</span> <span class=n>ReceiveTuple</span><span class=p>(</span><span class=n>Tuple</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>aTuple</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>counter</span> <span class=p>=</span> <span class=n>aTuple</span><span class=p>.</span><span class=n>Item2</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>aTuple</span><span class=p>.</span><span class=n>Item1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>newTuple</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Tuple</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>,</span><span class=kt>int</span><span class=p>&gt;(</span><span class=n>aTuple</span><span class=p>.</span><span class=n>Item1</span><span class=p>,</span> <span class=n>counter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ReceiveTuple</span><span class=p>(</span><span class=n>newTuple</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå˜é‡æŒ‡å‘è¿™ä¸ªå‡½æ•°ï¼Œå®ƒçš„ç±»å‹å°±åº”æ˜¯ <code>Func&lt;Tuple&lt;string,int>,bool></code>ã€‚</p><p>æ–°å¼çš„ C# å†™æ³•ï¼ˆä¼šè¢«ç¼–è¯‘æˆ <code>ValueTuple&lt;X,Y,...></code>ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>bool</span> <span class=n>ReceiveTuple</span><span class=p>((</span><span class=kt>string</span> <span class=n>str</span><span class=p>,</span> <span class=kt>int</span> <span class=n>i</span><span class=p>)</span> <span class=n>aTuple</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>counter</span> <span class=p>=</span> <span class=n>aTuple</span><span class=p>.</span><span class=n>i</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=n>aTuple</span><span class=p>.</span><span class=n>str</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>newTuple</span> <span class=p>=</span> <span class=p>(</span><span class=n>aTuple</span><span class=p>.</span><span class=n>str</span><span class=p>,</span> <span class=n>counter</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>ReceiveTuple</span><span class=p>(</span><span class=n>newTuple</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªå‡½æ•°çš„å˜é‡ï¼Œå®ƒçš„ç±»å‹æ˜¯ <code>Func&lt;ValueTuple&lt;string,int>,bool></code>ã€‚</p><p>ä½¿ç”¨ F#ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>rec</span> <span class=n>ReceiveTuple</span><span class=o>(</span><span class=n>str</span><span class=o>:</span> <span class=kt>string</span><span class=o>,</span> <span class=n>i</span><span class=o>:</span> <span class=n>int</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>counter</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=n>str</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>newTuple</span> <span class=o>=</span> <span class=o>(</span><span class=n>str</span><span class=o>,</span> <span class=n>counter</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ReceiveTuple</span> <span class=o>(</span><span class=n>newTuple</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>true</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¼•ç”¨è¿™ä¸ªå‡½æ•°çš„ F# ç±»å‹æ˜¯ <code>string*int->bool</code>ï¼›æ‰€ä»¥æˆ‘ä»¬å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„ç¬¦å·ï¼šæ˜Ÿå·ã€Œ*ã€åœ¨å…¶å®ƒè¯­è¨€é‡Œä»£è¡¨æŒ‡é’ˆï¼Œä½†åœ¨ F# ä¸­å®ƒåªæ˜¯å…ƒç»„ä¸­ç±»å‹çš„åˆ†éš”ç¬¦ã€‚</p><p>ä½ æ˜¯å¦æ³¨æ„åˆ°å…ƒç»„æ˜¯å¦‚ä½•èå…¥åˆ° F# ä¸­é‚£äº›çœ‹ä¼¼æ­£å¸¸çš„å‚æ•°ä¸­çš„ï¼Ÿäº‹å®ä¸Šï¼Œæœ¬æŒ‡å—åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨ F# ä¸­å†™çš„æ‰€æœ‰æ¥æ”¶å¤šå‚çš„å‡½æ•°ï¼Œå®é™…ä¸Šéƒ½åœ¨ä½¿ç”¨å…ƒç»„ã€‚ä¸ç”¨å…ƒç»„èƒ½åœ¨ F# ä¸­å†™å‡ºçš„ä¸Šè¿°æ–¹æ³•å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œåªæ˜¯çœç•¥äº†é€—å·ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>rec</span> <span class=n>ReceiveNonTuple</span> <span class=o>(</span><span class=n>str</span><span class=o>:</span> <span class=kt>string</span><span class=o>)</span> <span class=o>(</span><span class=n>i</span><span class=o>:</span> <span class=n>int</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>counter</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=n>str</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ReceiveNonTuple</span> <span class=n>str</span> <span class=n>counter</span>
</span></span><span class=line><span class=cl>    <span class=k>true</span>
</span></span></code></pre></td></tr></table></div></div><p>å‡½æ•° <code>ReceiveTuple</code> å’Œ <code>ReceiveNonTuple</code> ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸¤è€…éƒ½æ¥æ”¶ç›¸åŒæ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ F# å…ƒç»„ï¼Œè€Œç¬¬äºŒä¸ªå‡½æ•°çš„å‚æ•°åˆ™æ˜¯ä»¥ F# è¯­è¨€æƒ¯ç”¨æ–¹å¼å£°æ˜çš„ï¼ˆä»¥ã€ŒæŸ¯é‡ŒåŒ–ã€çš„å½¢å¼ï¼‰ã€‚</p><p>ä¸ºä»€ä¹ˆåè€…åœ¨ F# ä¸­æ›´ç¬¦åˆè¯­è¨€ä¹ æƒ¯ï¼Ÿå› ä¸º <code>ReceiveTuple</code> ä¸èƒ½ç”¨äºå±€éƒ¨åº”ç”¨ï¼Œè€Œ<code>ReceiveNonTuple</code> å¯ä»¥ï¼Œå› ä¸ºå®ƒä½¿ç”¨çš„æ˜¯ã€ŒæŸ¯é‡ŒåŒ–ã€é£æ ¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°çš„ç±»å‹ä¸æ˜¯ <code>string*int->bool</code>ï¼Œè€Œæ˜¯ <code>(string->int)->bool</code>ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆ <code>(string->int)->bool</code> æ¯” <code>string*int->bool</code> æ›´å¥½å‘¢ï¼Ÿ</p><p>åè€…å…è®¸ä¸ C# çš„äº’æ“ä½œï¼ˆå› ä¸ºè¿™æ˜¯ä»¥ CIL çº§åˆ«ä¼ é€’å‚æ•°çš„æ–¹å¼ï¼‰ï¼Œä½†å‰è€…å…è®¸ä»¥éå¸¸ç›´æ¥å’Œç®€æ´çš„æ–¹å¼è¿›è¡Œå±€éƒ¨åº”ç”¨ï¼ˆæˆ‘ä»¬å°†åœ¨åé¢çœ‹åˆ°ï¼Œéƒ¨åˆ†åº”ç”¨åœ¨ C# ä¸­ä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œä½†æ–¹å¼éå¸¸å¤æ‚ï¼Œå¯è¯»æ€§/ç»´æŠ¤æ€§å¾ˆå·®ï¼‰ã€‚</p><p>å› æ­¤ï¼Œä¸å†å¤šè¯´ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„éƒ¨åˆ†åº”ç”¨çš„ä¾‹å­ã€‚å‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªä¹˜æ³•å‡½æ•°ï¼Œæ¥æ”¶ä¸¤ä¸ªæ•´æ•°å¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Multiply</span> <span class=o>(</span><span class=n>x</span><span class=o>:</span> <span class=n>int</span><span class=o>)</span> <span class=o>(</span><span class=n>y</span><span class=o>:</span> <span class=n>int</span><span class=o>):</span> <span class=n>int</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>*</span> <span class=n>y</span>
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å†™ä¸€ä¸ªå‡½æ•°å°†ä¸€ä¸ªæ•°å­—çš„å€¼å¢åŠ ä¸€å€ï¼Œè€Œä¸éœ€è¦é‡å¤ä¹˜æ³•å‡½æ•°çš„ä»»ä½•å®ç°ç»†èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è¿™æ ·å†™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Double</span> <span class=o>(</span><span class=n>x</span><span class=o>:</span> <span class=n>int</span><span class=o>):</span> <span class=n>int</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>Multiply</span> <span class=mi>2</span>
</span></span></code></pre></td></tr></table></div></div><p>å½“æˆ‘ä»¬åªå‘å‡½æ•° <code>Multiply</code> ä¼ é€’ä¸€ä¸ªå‚æ•°æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„åŸå§‹ç­¾åï¼š<code>(int->int)->int</code>ã€‚ã€ŒæŸ¯é‡Œæ³•åˆ™ã€å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨ç±»å‹è¡¨è¾¾å¼ä¸­ä½¿ç”¨å°æ‹¬å·å®é™…ä¸Šæ˜¯ä¸éœ€è¦çš„ï¼ˆæˆ–è€…æŠŠå®ƒä»¬æ”¾åœ¨å…¶ä»–åœ°æ–¹ä¼šå¾—åˆ°ä¸€ä¸ªç­‰ä»·çš„è¡¨è¾¾å¼ï¼‰ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·å†™ <code>int->int->int</code> æˆ–è€…è¿™æ ·å†™ <code>int->ï¼ˆint->intï¼‰</code>ã€‚å› æ­¤ï¼Œå‘ä¸€ä¸ªåŸæœ¬æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°åªä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œå®é™…ä¸Šä¼šå¯¼è‡´è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ›´å¥½åœ°ç†è§£å®ƒï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Double</span> <span class=o>(</span><span class=n>x</span><span class=o>:</span> <span class=n>int</span><span class=o>):</span> <span class=n>int</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>doubleFunc</span> <span class=o>=</span> <span class=n>Multiply</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>doubleFunc</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…è¿™æ ·ï¼ˆå†—é•¿çš„ç±»å‹å£°æ˜ï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Double</span> <span class=o>(</span><span class=n>x</span><span class=o>:</span> <span class=n>int</span><span class=o>):</span> <span class=n>int</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>doubleFunc</span><span class=o>:</span> <span class=n>int</span><span class=o>-&gt;</span><span class=n>int</span> <span class=o>=</span> <span class=n>Multiply</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>result</span><span class=o>:</span> <span class=n>int</span> <span class=o>=</span> <span class=n>doubleFunc</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œä¹Ÿè®¸èƒ½è®©ä½ æ˜ç™½å±€éƒ¨åº”ç”¨çš„å¼ºå¤§ä¹‹å¤„ã€‚ä½†å®ƒæ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¾èµ–æ³¨å…¥ç­‰æ“ä½œçš„åŸºç¡€ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œä½ å¯èƒ½åªä¼šæŒæ¡å®ƒæ‰€å¸¦æ¥çš„çµæ´»æ€§ï¼Œä½†è‡³å°‘æˆ‘ä»¬å·²ç»å¯ä»¥å‘ä½ å±•ç¤ºå®ƒåœ¨ F# ä¸­çš„ç®€å•æ€§ã€‚åœ¨ C# ä¸­ï¼Œæˆ‘ä»¬åªèƒ½è¿™æ ·æ¥å®ç°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>static</span> <span class=n>Func</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=n>Func</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>&gt;&gt;</span> <span class=n>Multiply</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=n>y</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=p>*</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=n>Function</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>Double</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Multiply</span><span class=p>().</span><span class=n>Invoke</span><span class=p>(</span><span class=m>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kt>int</span> <span class=n>Main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>someInt</span> <span class=p>=</span> <span class=m>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>Double</span><span class=p>().</span><span class=n>Invoke</span><span class=p>(</span><span class=n>someInt</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½ çš„å¤§è„‘èƒ½è½¬è¿‡å¼¯å„¿æ¥å—ï¼Ÿå¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ¯”é˜…è¯» F# ä»£ç éš¾ç†è§£å¤šäº†ã€‚</p><p>å…³äºå±€éƒ¨åº”ç”¨åŠå…¶ç”¨å¤„çš„æœ€åè¯´æ˜ï¼šä½ ä½¿ç”¨ F# çš„æ—¶é—´è¶Šé•¿ï¼Œä½ å°±ä¼šæ„è¯†åˆ°å±€éƒ¨åº”ç”¨å®é™…ä¸Šæ˜¯ä¸€ç§ç®€åŒ–çš„ä¾èµ–æ³¨å…¥/æ§åˆ¶åè½¬ï¼ˆDI / IoCï¼‰æ–¹å¼ï¼Œè¯¦è§<a class=link href=https://blog.ploeh.dk/2017/01/30/partial-application-is-dependency-injection/ target=_blank rel=noopener>ã€Šå±€éƒ¨åº”ç”¨å°±æ˜¯ä¾èµ–æ³¨å…¥ã€‹</a>ä¸€æ–‡ã€‚</p><h3 id=ä¾‹-10å­—ç¬¦ä¸²æ’å€¼>ä¾‹ 10ï¼šå­—ç¬¦ä¸²æ’å€¼</h3><p>åœ¨æ—©æœŸçš„ C# ç‰ˆæœ¬ä¸­ï¼Œä½ éœ€è¦è¿™æ ·å†™ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>aStringToShowToTheUser</span> <span class=p>=</span> <span class=n>String</span><span class=p>.</span><span class=n>Format</span><span class=p>(</span><span class=s>&#34;Hello {0}, I see you are {1} years old&#34;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šåœ¨å¤§å‹ä»£ç åº“ä¸­ï¼Œè®¸å¤šå˜é‡å’Œå…ƒç´ è¢«åŒ…å«åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæˆ‘ä»¬ç´¢å¼•äº†ä¸€ä¸ªæ²¡æœ‰æä¾›çš„å˜é‡ï¼ˆä¾‹å¦‚ <code>{2}</code>ï¼‰å¾ˆå®¹æ˜“å‘ç”Ÿï¼Œæˆ–è€…æˆ‘ä»¬æä¾›çš„å˜é‡æ²¡æœ‰éšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><p>åœ¨ F# ä¸­æ˜¯è¿™æ ·çš„ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>aStringToShowToTheUser</span> <span class=o>=</span> <span class=n>sprintf</span> <span class=s>&#34;Hello %s, I see you are %i years old&#34;</span> <span class=n>name</span> <span class=n>age</span>
</span></span></code></pre></td></tr></table></div></div><p>å“ªä¸ªæ›´å¥½ï¼Ÿ</p><ul><li>å¦‚æœä½ æä¾›çš„å‚æ•°å°‘äºï¼ˆæˆ–å¤šäºï¼‰åœ¨å­—ç¬¦ä¸²ä¸­æ’å€¼æ‰€éœ€çš„å‚æ•°ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶å‡ºç°å¼‚å¸¸ã€‚</li><li>ä½ éœ€è¦é€šè¿‡ <code>%</code> åé¢çš„å­—æ¯æ¥æŒ‡å®šå­—ç¬¦ä¸²ä¸­å…ƒç´ çš„ç±»å‹ï¼Œå¦‚æœå®ƒä¸ä¸ºåŒä¸€ä½ç½®æä¾›çš„å…ƒç´ çš„ç±»å‹ä¸åŒ¹é…ï¼Œé‚£ä¹ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ï¼ˆè€Œä¸æ˜¯ä¸€ä¸ªæ— ç”¨çš„å…ƒç´ å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ã€‚</li><li>ä½ éœ€è¦æ›´å°‘çš„å°æ‹¬å·ï¼ˆå‚è§æœ¬æŒ‡å—ä¸­çš„æœ€åä¸€ä¸ªä¾‹å­ï¼‰ã€‚</li></ul><h3 id=ä¾‹-11å¼‚æ­¥ä»£ç >ä¾‹ 11ï¼šå¼‚æ­¥ä»£ç </h3><p>ä¸€æ®µç®€å•çš„ C# å¼‚æ­¥ä»£ç ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl>    <span class=k>static</span> <span class=k>class</span> <span class=nc>MainClass</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>public</span> <span class=k>class</span> <span class=nc>Toast</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>public</span> <span class=kt>bool</span> <span class=n>IsYummy</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=k>async</span> <span class=n>Task</span><span class=p>&lt;</span><span class=n>Toast</span><span class=p>&gt;</span> <span class=n>ToastBreadAsync</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>task</span> <span class=p>=</span> <span class=n>Task</span><span class=p>.</span><span class=n>Run</span><span class=p>(()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>                <span class=k>new</span> <span class=n>Toast</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>await</span> <span class=n>task</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=k>void</span> <span class=n>ApplyButter</span><span class=p>(</span><span class=n>Toast</span> <span class=n>toast</span><span class=p>)</span> <span class=p>{</span> <span class=cm>/* TODO */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=k>void</span> <span class=n>ApplyJam</span><span class=p>(</span><span class=n>Toast</span> <span class=n>toast</span><span class=p>)</span> <span class=p>{</span> <span class=cm>/* TODO */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>static</span> <span class=k>async</span> <span class=n>Task</span><span class=p>&lt;</span><span class=n>Toast</span><span class=p>&gt;</span> <span class=n>MakeToastWithButterAndJamAsync</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>toast</span> <span class=p>=</span> <span class=k>await</span> <span class=n>ToastBreadAsync</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>ApplyButter</span><span class=p>(</span><span class=n>toast</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>ApplyJam</span><span class=p>(</span><span class=n>toast</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>toast</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>public</span> <span class=k>static</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>Main</span><span class=p>(</span><span class=kt>string</span><span class=p>[]</span> <span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;Hello World!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>var</span> <span class=n>toast</span> <span class=p>=</span> <span class=k>await</span> <span class=n>MakeToastWithButterAndJamAsync</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;Bye World!&#34;</span> <span class=p>+</span> <span class=n>toast</span><span class=p>.</span><span class=n>IsYummy</span><span class=p>());</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ F# ä¸­å˜æˆäº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>type</span> <span class=nc>Toast</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>member</span> <span class=n>this</span><span class=p>.</span><span class=nf>IsYummy</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>ToastBread</span><span class=bp>()</span><span class=o>:</span> <span class=n>Async</span><span class=o>&lt;</span><span class=n>Toast</span><span class=o>&gt;</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Toast</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>ApplyButter</span><span class=o>(</span><span class=n>toast</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=bp>()</span> <span class=c1>//TODO
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>ApplyJam</span><span class=o>(</span><span class=n>toast</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=bp>()</span> <span class=c1>//TODO
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>MakeToastWithButterAndJam</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>let!</span> <span class=nv>toast</span> <span class=o>=</span> <span class=n>ToastBread</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=n>ApplyButter</span><span class=o>(</span><span class=n>toast</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>ApplyJam</span><span class=o>(</span><span class=n>toast</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>toast</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[&lt;</span><span class=n>EntryPoint</span><span class=o>&gt;]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>main</span><span class=o>(</span><span class=n>argv</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;Hello World!&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>toast</span> <span class=o>=</span> <span class=n>MakeToastWithButterAndJam</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>                <span class=o>|&gt;</span> <span class=nn>Async</span><span class=p>.</span><span class=n>RunSynchronously</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span> <span class=o>(</span><span class=s>&#34;Bye world!&#34;</span> <span class=o>+</span> <span class=o>(</span><span class=n>toast</span><span class=o>.</span><span class=n>IsYummy</span><span class=bp>()</span><span class=o>.</span><span class=n>ToString</span><span class=bp>()</span><span class=o>))</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=c1>// return an integer exit code
</span></span></span></code></pre></td></tr></table></div></div><p>å…³é”®ä¸åŒç‚¹ï¼š</p><ul><li>åœ¨ C# ä¸­ï¼Œå½“ä½ è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª <code>Task&lt;T></code> å¯¹è±¡ï¼Œå®ƒä»£è¡¨æ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œå¹¶ä¸”å·²ç»è¢«å¯åŠ¨ã€‚ä½†åœ¨ F# ä¸­ï¼ŒJob æ˜¯ç”±ä¸€ä¸ª <code>Async&lt;'T></code> å¯¹è±¡è¡¨ç¤ºçš„ï¼Œå®ƒè¿˜æ²¡æœ‰è¢«å¯åŠ¨ï¼ˆä½ å¯ä»¥åœ¨ä¹‹åå†³å®šå¦‚ä½•å¯åŠ¨å®ƒï¼›ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢ä¾‹å­ä¸­ï¼Œå®ƒç”¨ <code>Async.RunSynchronously</code> æ¥å¯åŠ¨ï¼‰ã€‚</li><li>åœ¨ F# çš„ <code>let</code> è¯­å¥åé¢åŠ ä¸ŠæƒŠå¹å· <code>!</code> ç­‰ä»·äº C# çš„ <code>await</code>ã€‚</li><li>åœ¨ C# ä¸­ï¼Œä½ å°†è®¡ç®—é‡å¤§çš„åŒæ­¥æ–¹æ³•åŒ…è£…åœ¨ <code>Task.Run()</code> ä¸­ï¼Œå°†å…¶è½¬æ¢ä¸ºå¼‚æ­¥æ–¹æ³•ã€‚åœ¨ F# ä¸­ï¼Œä½ åªéœ€ç”¨ <code>async{}</code> å—ï¼ˆä¸€ä¸ªè®¡ç®—è¡¨è¾¾å¼ï¼‰æ¥åŒ…è£…å®ƒä»¬ã€‚</li></ul><p>å¦‚æœæˆ‘ä»¬ç¨å¾®æ”¹å˜ä¸Šé¢çš„ C# ä»£ç ï¼Œå¼•å…¥éæ³›å‹ Task å¯¹è±¡å’Œå¹¶è¡ŒåŒ–ï¼ˆå‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªçƒ¤é¢åŒ…æœºï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>Ingredients</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>Toast</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=n>Toast</span><span class=p>(</span><span class=n>Ingredients</span> <span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=k>async</span> <span class=n>Task</span><span class=p>&lt;</span><span class=n>Toast</span><span class=p>&gt;</span> <span class=n>ToastBreadAsync</span><span class=p>(</span><span class=n>Ingredients</span> <span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>task</span> <span class=p>=</span> <span class=n>Task</span><span class=p>.</span><span class=n>Run</span><span class=p>(()</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Toast</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>await</span> <span class=n>task</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=k>async</span> <span class=n>Task</span><span class=p>&lt;</span><span class=n>Toast</span><span class=p>[]&gt;</span> <span class=n>Make2ToastsAsync</span><span class=p>(</span><span class=n>Ingredients</span> <span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>toast1</span> <span class=p>=</span> <span class=n>ToastBreadAsync</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>toast2</span> <span class=p>=</span> <span class=n>ToastBreadAsync</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>await</span> <span class=n>Task</span><span class=p>.</span><span class=n>WhenAll</span><span class=p>(</span><span class=n>toast1</span><span class=p>,</span> <span class=n>toast2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>MakeToastsAsync</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>i</span> <span class=p>=</span> <span class=k>await</span> <span class=n>GatherIngredients</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>Make2ToastsAsync</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>static</span> <span class=k>async</span> <span class=n>Task</span><span class=p>&lt;</span><span class=n>Ingredients</span><span class=p>&gt;</span> <span class=n>GatherIngredients</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>await</span> <span class=n>Task</span><span class=p>.</span><span class=n>FromResult</span><span class=p>(</span><span class=k>new</span> <span class=n>Ingredients</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>static</span> <span class=k>async</span> <span class=n>Task</span> <span class=n>Main</span><span class=p>(</span><span class=kt>string</span><span class=p>[]</span> <span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;Hello World!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>MakeToastsAsync</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;Bye World!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨ F# ä¸­ï¼Œè¿™å˜æˆäº†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>type</span> <span class=nc>Ingredients</span> <span class=bp>()</span> <span class=o>=</span> <span class=k>class</span> <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>type</span> <span class=nc>Toast</span> <span class=o>(</span><span class=n>i</span><span class=o>:</span> <span class=n>Ingredients</span><span class=o>)</span> <span class=o>=</span> <span class=k>class</span> <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>ToastBread</span><span class=o>(</span><span class=n>i</span><span class=o>):</span> <span class=n>Async</span><span class=o>&lt;</span><span class=n>Toast</span><span class=o>&gt;</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Toast</span><span class=o>(</span><span class=n>i</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>GatherIngredients</span> <span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span> <span class=k>return</span> <span class=n>Ingredients</span><span class=bp>()</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>Make2Toasts</span><span class=o>(</span><span class=n>i</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>twoJobs</span><span class=o>:</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Async</span><span class=o>&lt;</span><span class=n>Toast</span><span class=o>&gt;&gt;</span> <span class=o>=</span> <span class=o>[</span><span class=n>ToastBread</span><span class=o>(</span><span class=n>i</span><span class=o>);</span> <span class=n>ToastBread</span><span class=o>(</span><span class=n>i</span><span class=o>)]</span>
</span></span><span class=line><span class=cl>        <span class=k>let!</span> <span class=nv>_</span> <span class=o>=</span> <span class=nn>Async</span><span class=p>.</span><span class=n>Parallel</span><span class=o>(</span><span class=n>twoJobs</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>MakeToasts</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>let!</span> <span class=nv>i</span> <span class=o>=</span> <span class=n>GatherIngredients</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=k>do</span><span class=o>!</span> <span class=n>Make2Toasts</span><span class=o>(</span><span class=n>i</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[&lt;</span><span class=n>EntryPoint</span><span class=o>&gt;]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>main</span><span class=o>(</span><span class=n>argv</span><span class=o>)</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;Hello World!&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=n>MakeToasts</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=o>|&gt;</span> <span class=nn>Async</span><span class=p>.</span><span class=n>RunSynchronously</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;Bye world!&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=c1>// return an integer exit code
</span></span></span></code></pre></td></tr></table></div></div><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼š</p><ul><li>åœ¨ C# ä¸­å¤„ç†éæ³›å‹ Taskï¼Œåœ¨ F# ä¸­æ„å‘³ç€ä½¿ç”¨ <code>unit</code> ä½œä¸º <code>Async</code> çš„æ³›å‹å‚æ•°ï¼š<code>Async&lt;unit></code>ã€‚ä¸è¦ä½¿ç”¨ <code>let! x = ...</code>ï¼Œä½ åªéœ€è¦ <code>do!</code>ã€‚</li><li><code>Task.WhenAll</code> çš„ç­‰ä»·ç‰©æ˜¯ <code>Async.Parallel</code>ã€‚</li></ul><h3 id=ä¾‹-12ç¼–å†™æ›´å°‘ç¬¦å·æå‡-f-è„šæœ¬çš„å¯é˜…è¯»æ€§>ä¾‹ 12ï¼šç¼–å†™æ›´å°‘ç¬¦å·ï¼Œæå‡ F# è„šæœ¬çš„å¯é˜…è¯»æ€§ï¼</h3><p>ç›¸ä¿¡ä½ å·²ç»æ˜ç™½äº† F# ä¸­å…ƒç»„å’ŒæŸ¯é‡ŒåŒ–å‚æ•°çš„åŒºåˆ«ã€‚åè€…æ›´æ¨èä½¿ç”¨ã€‚</p><p>ä½ å¯èƒ½æ˜ç™½ï¼Œå†™è¿™ä¹ˆå¤šå°æ‹¬å·å…¶å®åªæ˜¯ä¸ºäº†æ˜ å°„å…ƒç»„ä¸­çš„ä¸œè¥¿ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯åˆšä» C# è½¬åˆ° F# çš„æ€ç»´æƒ¯æ€§ã€‚</p><p>F# çš„ç®€æ´ä¹‹å¤„ï¼š</p><ul><li>æ²¡æœ‰é‚£ä¹ˆå¤šçš„æ‹¬å·ï¼Œå› ä¸ºä½ ä¸å†ä½¿ç”¨å…ƒç»„äº†ã€‚</li><li>ä¸éœ€è¦ä½¿ç”¨åˆ†å·ï¼Œå¦‚æœä½ åªä½¿ç”¨ EOL åˆ†éš”ç¬¦ã€‚</li><li>ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ï¼ˆåœ¨ F# ä¸­å¤„ç†è®°å½•ç±»å‹æ—¶æ‰éœ€è¦å®ƒä»¬ï¼‰ã€‚</li><li>è®© F# ç¼–è¯‘å™¨æ¨æ–­ç±»å‹ï¼Œå°±ä¸éœ€è¦å¤šæ¬¡ä½¿ç”¨å†’å· <code>:</code>ã€‚</li><li>æ›´å¤šåœ°ä½¿ç”¨ç®¡é“è¿ç®—ç¬¦ <code>|></code>ï¼Œä»¥é¿å…åœ¨ä¸€å¤§ä¸²ä»£ç çš„å³è¾¹è¿˜è¦å†™ä¸€å †å°æ‹¬å·ã€‚</li><li>åœ¨ F# ä¸­çš„ <code>if</code> è¡¨è¾¾å¼ä¸­ä¸éœ€è¦å°æ‹¬å·ï¼ˆä¸ C# ç›¸åï¼‰ã€‚</li></ul><p>æœ‰äº†è¿™äº›è¦ç‚¹ï¼Œæˆ‘ä»¬æ¥é‡å†™ä¹‹å‰çš„æ‰€æœ‰ F# å®ä¾‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>open</span> <span class=nn>System</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>exitCode</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>incomingChar</span> <span class=o>=</span> <span class=nn>Environment</span><span class=p>.</span><span class=n>NewLine</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=ow>not</span> <span class=o>(</span><span class=n>incomingChar</span> <span class=o>=</span> <span class=nn>String</span><span class=p>.</span><span class=n>Empty</span><span class=o>)</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>incomingChar</span> <span class=o>&lt;&gt;</span> <span class=s>&#34;</span><span class=se>\t</span><span class=s>&#34;</span> <span class=o>&amp;&amp;</span> <span class=n>incomingChar</span><span class=o>.</span><span class=n>Length</span> <span class=o>&gt;</span> <span class=mi>1</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=mi>4</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nn>Environment</span><span class=p>.</span><span class=n>Exit</span> <span class=n>exitCode</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>intArray</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl>        <span class=o>[|</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>           <span class=mi>2</span>
</span></span><span class=line><span class=cl>           <span class=mi>3</span> <span class=o>|]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>intList</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=o>[</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>          <span class=mi>5</span>
</span></span><span class=line><span class=cl>          <span class=mi>6</span> <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>sequenceOfIntegers</span> <span class=o>=</span> <span class=n>intList</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>dic</span> <span class=o>=</span> <span class=n>dict</span> <span class=o>[</span> <span class=o>(</span><span class=s>&#34;One&#34;</span><span class=o>,</span> <span class=mi>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                 <span class=o>(</span><span class=s>&#34;Two&#34;</span><span class=o>,</span> <span class=mi>2</span><span class=o>)</span> <span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>try</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span>
</span></span><span class=line><span class=cl>        <span class=n>TrySomething</span> <span class=n>someParam</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=o>:?</span> <span class=n>SomeException</span> <span class=k>as</span> <span class=n>ex</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>SomeCondition</span> <span class=n>ex</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=n>DoSomethingElse</span> <span class=n>ex</span>
</span></span><span class=line><span class=cl>            <span class=n>raise</span> <span class=n>OtherException</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=n>reraise</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>finally</span>
</span></span><span class=line><span class=cl>    <span class=n>MakeSureToCleanup</span> <span class=n>someParam</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>use</span> <span class=n>reader</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StreamReader</span> <span class=n>someFile</span>
</span></span><span class=line><span class=cl><span class=n>DoStuff</span> <span class=n>reader</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Check</span> <span class=n>someParam1</span> <span class=n>someParam2</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>match</span> <span class=n>someParam1</span> <span class=k>with</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=n>Some</span> <span class=n>someValue</span> <span class=o>-&gt;</span> <span class=c1>// like &#39;as&#39; in C#, you cast and want the value
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>let</span> <span class=nv>str</span> <span class=o>=</span> <span class=n>someValue</span><span class=o>.</span><span class=n>ToString</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=n>stringBuilder</span><span class=o>.</span><span class=n>Append</span> <span class=n>str</span> <span class=o>|&gt;</span> <span class=n>ignore</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=n>None</span> <span class=o>-&gt;</span> <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>match</span> <span class=n>someParam2</span> <span class=k>with</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=n>Some</span> <span class=o>_</span> <span class=o>-&gt;</span> <span class=c1>// like &#39;is&#39; in C#, you don&#39;t care about the value
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>stringBuilder</span><span class=o>.</span><span class=n>Append</span> <span class=nn>String</span><span class=p>.</span><span class=n>Empty</span> <span class=o>|&gt;</span> <span class=n>ignore</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span> <span class=o>_</span> <span class=o>-&gt;</span> <span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>type</span> <span class=nc>Foo</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl>    <span class=o>{</span> <span class=n>Bar</span><span class=o>:</span> <span class=n>int</span>
</span></span><span class=line><span class=cl>      <span class=n>Baz</span><span class=o>:</span> <span class=kt>string</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>module</span> <span class=nn>FooFactory</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>internal</span> <span class=n>CreateFoo</span> <span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=o>{</span> <span class=n>Bar</span> <span class=o>=</span> <span class=mi>42</span>
</span></span><span class=line><span class=cl>          <span class=n>Baz</span> <span class=o>=</span> <span class=s>&#34;forty-two&#34;</span> <span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>module</span> <span class=nn>Foo</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>Baz</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>rec</span> <span class=n>Bar</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>Baz</span><span class=bp>()</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=n>Bar</span><span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>module</span> <span class=nn>SomeFsharpModule</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate1</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception1</span> <span class=n>dlg</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=n>dlg</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception1</span><span class=o>(</span><span class=k>fun</span> <span class=o>_</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span> <span class=s>&#34;hello 1&#34;</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate2</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception2</span> <span class=n>dlg</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>bar</span> <span class=o>=</span> <span class=s>&#34;baz&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>dlg</span> <span class=n>bar</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception2</span><span class=o>(</span><span class=k>fun</span> <span class=n>bar</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;hello 2 &#34;</span> <span class=o>+</span> <span class=n>bar</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate3</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception3</span> <span class=n>dlg</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>dlg</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>            <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception3</span><span class=o>(</span><span class=k>fun</span> <span class=o>_</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span> <span class=s>&#34;hello 3&#34;</span>
</span></span><span class=line><span class=cl>            <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>SendingAnonymousMethodAsDelegate4</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>DelegateReception4</span> <span class=n>dlg</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>bar</span> <span class=o>=</span> <span class=mi>4</span><span class=o>.</span><span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>dlg</span> <span class=n>bar</span>
</span></span><span class=line><span class=cl>            <span class=bp>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>DelegateReception4</span><span class=o>(</span><span class=k>fun</span> <span class=n>bar</span> <span class=o>-&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=o>(</span><span class=s>&#34;hello 4 &#34;</span> <span class=o>+</span> <span class=n>bar</span><span class=o>.</span><span class=n>ToString</span><span class=bp>()</span><span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=kt>int64</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl>        <span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>match</span> <span class=n>int</span><span class=o>.</span><span class=n>TryParse</span> <span class=n>someString</span> <span class=k>with</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=k>true</span><span class=o>,</span> <span class=n>anInteger</span> <span class=o>-&gt;</span> <span class=n>DoSomethingWithAnInteger</span> <span class=n>anInteger</span>
</span></span><span class=line><span class=cl><span class=o>|</span> <span class=k>false</span><span class=o>,</span> <span class=o>_</span> <span class=o>-&gt;</span> <span class=n>DoSomethingElse</span><span class=bp>()</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>rec</span> <span class=n>ReceiveNonTuple</span> <span class=n>str</span> <span class=n>i</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>counter</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span> <span class=n>str</span>
</span></span><span class=line><span class=cl>    <span class=n>ReceiveNonTuple</span> <span class=n>str</span> <span class=n>counter</span>
</span></span><span class=line><span class=cl>    <span class=k>true</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>Multiply</span> <span class=n>x</span> <span class=n>y</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>*</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>Double</span> <span class=n>x</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>doubleFunc</span> <span class=o>=</span> <span class=n>Multiply</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>let</span> <span class=nv>result</span> <span class=o>=</span> <span class=n>doubleFunc</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>let</span> <span class=nv>aStringToShowToTheUser</span> <span class=o>=</span> <span class=n>sprintf</span> <span class=s>&#34;Hello %s, I see you are %i years old&#34;</span> <span class=n>name</span> <span class=n>age</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fsharp data-lang=fsharp><span class=line><span class=cl><span class=k>type</span> <span class=nc>Ingredients</span> <span class=bp>()</span> <span class=o>=</span> <span class=k>class</span> <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>type</span> <span class=nc>Toast</span> <span class=o>(</span><span class=n>i</span><span class=o>:</span> <span class=n>Ingredients</span><span class=o>)</span> <span class=o>=</span> <span class=k>class</span> <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>ToastBread</span> <span class=n>i</span><span class=o>:</span> <span class=n>Async</span><span class=o>&lt;</span><span class=n>Toast</span><span class=o>&gt;</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Toast</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>GatherIngredients</span> <span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span> <span class=k>return</span> <span class=n>Ingredients</span><span class=bp>()</span> <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>Make2Toasts</span> <span class=n>i</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>let</span> <span class=nv>twoJobs</span><span class=o>:</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Async</span><span class=o>&lt;</span><span class=n>Toast</span><span class=o>&gt;&gt;</span> <span class=o>=</span> <span class=o>[</span><span class=n>ToastBread</span> <span class=n>i</span><span class=o>;</span> <span class=n>ToastBread</span> <span class=n>i</span><span class=o>]</span>
</span></span><span class=line><span class=cl>        <span class=k>let!</span> <span class=nv>_</span> <span class=o>=</span> <span class=nn>Async</span><span class=p>.</span><span class=n>Parallel</span> <span class=n>twoJobs</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>MakeToasts</span><span class=bp>()</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=n>async</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>let!</span> <span class=nv>i</span> <span class=o>=</span> <span class=n>GatherIngredients</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=k>do</span><span class=o>!</span> <span class=n>Make2Toasts</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[&lt;</span><span class=n>EntryPoint</span><span class=o>&gt;]</span>
</span></span><span class=line><span class=cl><span class=k>let</span> <span class=nv>main</span> <span class=n>argv</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span> <span class=s>&#34;Hello World!&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>MakeToasts</span><span class=bp>()</span>
</span></span><span class=line><span class=cl>        <span class=o>|&gt;</span> <span class=nn>Async</span><span class=p>.</span><span class=n>RunSynchronously</span>
</span></span><span class=line><span class=cl>    <span class=nn>Console</span><span class=p>.</span><span class=n>WriteLine</span> <span class=s>&#34;Bye world!&#34;</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=c1>// return an integer exit code
</span></span></span></code></pre></td></tr></table></div></div><hr><p>ç¥è´ºä½ ! ä½ å­¦ä¹ äº†è¶³å¤Ÿçš„çŸ¥è¯†ï¼Œå¤§æ¦‚å¯ä»¥ç†è§£ 80% çš„ F# ä»£ç äº†ã€‚</p><p>æˆ–è€…è¯´ 80% çš„ç®€å• F# ä»£ç ï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•° F# è„šæœ¬ä¸­æ‰€ä½¿ç”¨çš„ã€‚</p><p>æˆ‘å¯ä»¥å‘ä½ è§£é‡Šå¦‚ä½•åœ¨ F# ä¸­å»ºç«‹ç›¸å½“äºç±»ï¼ˆæœ‰è¡Œä¸ºã€æ„é€ å‡½æ•°ã€å±æ€§ï¼‰æˆ–ç»“æ„ï¼ˆå€¼ç±»å‹å’Œå †æ ˆåˆ†é…ï¼‰ä½†æ˜¯ï¼š</p><ol><li>è¿™äº›ä¸æ˜¯ F# çš„æƒ¯ç”¨å†™æ³•</li><li>å¤§å¤šæ•°è„šæœ¬ç”šè‡³ä¸éœ€è¦ç±»å‹ï¼Œå®ƒä»¬åªéœ€è¦å‡½æ•°ã€å€¼å’Œè°ƒç”¨ï¼ˆå¦‚æœä½ æŠŠ F# å½“è„šæœ¬ç”¨ï¼‰</li></ol><p>æ— è®ºå¦‚ä½•ï¼Œæˆ‘å»ºè®®ä¸‹ä¸€æ­¥ï¼š</p><ul><li>è§‚çœ‹è¿™ä¸ª <a class=link href="https://www.youtube.com/watch?v=HQ887aOZITY" target=_blank rel=noopener>è®²åº§</a></li><li>çœ‹çœ‹è¿™ç¯‡ <a class=link href=https://www.compositional-it.com/news-blog/5-features-that-c-has-that-f-doesnt-have/ target=_blank rel=noopener>æ–‡ç« </a></li></ul><p>å¦‚æœè¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä½ è¿˜åœ¨ä¸ºä» C# è½¬æ¢è‡³ F# è€ŒæŒ£æ‰ï¼Œä¹Ÿå¯ä»¥æ—¶ä¸æ—¶åœ°ä½¿ç”¨è¿™ä¸ª <a class=link href=https://github.com/willsam100/FShaper target=_blank rel=noopener>å·¥å…·</a>ã€‚</p></section><footer class=article-footer><section class=article-tags><a href=/tags/fsharp-basic/>FSharp Basic</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/advanced-csharp-1/><div class=article-image><img src=/p/advanced-csharp-1/head.50573d1817e36e3313a7fd57690ebc80_hu6445997bcd53608f7e2f035aad872a86_31881_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post é§æ©çš„ C# è¿›é˜¶å°å†Œ  01 - å¹¶å‘ä¸å¼‚æ­¥" data-key=advanced-csharp-1 data-hash="md5-UFc9GBfjbjMTp/1XaQ68gA=="></div><div class=article-details><h2 class=article-title>é§æ©çš„ C# è¿›é˜¶å°å†Œ 01 - å¹¶å‘ä¸å¼‚æ­¥</h2></div></a></article><article class=has-image><a href=/p/rx-magic-3/><div class=article-image><img src=/p/rx-magic-3/head.c9b141998febf281884606d443822a75_hu60daa3e750dae8efe162b164d024055e_222411_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— 03 - æ·±å…¥æµçš„åˆ›å»º" data-key=rx-magic-3 data-hash="md5-ybFBmY/r8oGIRgbUQ4IqdQ=="></div><div class=article-details><h2 class=article-title>Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— 03 - æ·±å…¥æµçš„åˆ›å»º</h2></div></a></article><article class=has-image><a href=/p/rx-magic-ex/><div class=article-image><img src=/p/rx-magic-ex/head.c9b141998febf281884606d443822a75_hu60daa3e750dae8efe162b164d024055e_222411_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— Ex - å‡½æ•°å¼æ€æƒ³ & æµå¼æ¥å£" data-key=rx-magic-ex data-hash="md5-ybFBmY/r8oGIRgbUQ4IqdQ=="></div><div class=article-details><h2 class=article-title>Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— Ex - å‡½æ•°å¼æ€æƒ³ & æµå¼æ¥å£</h2></div></a></article><article class=has-image><a href=/p/rx-magic-2/><div class=article-image><img src=/p/rx-magic-2/head.c9b141998febf281884606d443822a75_hu60daa3e750dae8efe162b164d024055e_222411_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— 02 - åŸºæœ¬ä½¿ç”¨" data-key=rx-magic-2 data-hash="md5-ybFBmY/r8oGIRgbUQ4IqdQ=="></div><div class=article-details><h2 class=article-title>Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— 02 - åŸºæœ¬ä½¿ç”¨</h2></div></a></article><article class=has-image><a href=/p/rx-magic-1/><div class=article-image><img src=/p/rx-magic-1/head.c9b141998febf281884606d443822a75_hu60daa3e750dae8efe162b164d024055e_222411_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— 01 - åŸºç¡€æ¦‚å¿µ" data-key=rx-magic-1 data-hash="md5-ybFBmY/r8oGIRgbUQ4IqdQ=="></div><div class=article-details><h2 class=article-title>Rx.NET å“åº”å¼ç¼–ç¨‹æŒ‡åŒ— 01 - åŸºç¡€æ¦‚å¿µ</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2021 -
2023 æ¸¸å°”æ›¼æ–¯å…‹</section><section class=powerby>UXX<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.13.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#ä¾‹-1åŸºæœ¬å‡½æ•°å£°æ˜ä¸å®ç°>ä¾‹ 1ï¼šåŸºæœ¬å‡½æ•°å£°æ˜ä¸å®ç°</a></li><li><a href=#ä¾‹-2åŸºæœ¬å…³é”®å­—å’Œæ“ä½œç¬¦>ä¾‹ 2ï¼šåŸºæœ¬å…³é”®å­—å’Œæ“ä½œç¬¦</a></li><li><a href=#ä¾‹-3åŸºç¡€é›†åˆ>ä¾‹ 3ï¼šåŸºç¡€é›†åˆ</a></li><li><a href=#ä¾‹-4ä»£ç å—>ä¾‹ 4ï¼šä»£ç å—</a></li><li><a href=#ä¾‹-5é¿å…-null-å’Œå¿½ç•¥>ä¾‹ 5ï¼šé¿å… Null å’Œå¿½ç•¥</a></li><li><a href=#ä¾‹-6ç±»å‹>ä¾‹ 6ï¼šç±»å‹</a></li><li><a href=#ä¾‹-7å‡½æ•°çš„é¡ºåºå¾ˆé‡è¦å¾ªç¯ä¾èµ–æ˜¯ä¸‡æ¶ä¹‹æº>ä¾‹ 7ï¼šå‡½æ•°çš„é¡ºåºå¾ˆé‡è¦ï¼Œå¾ªç¯ä¾èµ–æ˜¯ä¸‡æ¶ä¹‹æº</a></li><li><a href=#ä¾‹-8å§”æ‰˜åŒ¿åå‡½æ•°æˆ‘çš„è€å¤©çˆ·>ä¾‹ 8ï¼šå§”æ‰˜ã€åŒ¿åå‡½æ•°Â·Â·Â·æˆ‘çš„è€å¤©çˆ·ï¼</a></li><li><a href=#ä¾‹-9å…ƒç»„å±€éƒ¨åº”ç”¨ä»¥åŠæŸ¯é‡ŒåŒ–>ä¾‹ 9ï¼šå…ƒç»„ã€å±€éƒ¨åº”ç”¨ä»¥åŠæŸ¯é‡ŒåŒ–</a></li><li><a href=#ä¾‹-10å­—ç¬¦ä¸²æ’å€¼>ä¾‹ 10ï¼šå­—ç¬¦ä¸²æ’å€¼</a></li><li><a href=#ä¾‹-11å¼‚æ­¥ä»£ç >ä¾‹ 11ï¼šå¼‚æ­¥ä»£ç </a></li><li><a href=#ä¾‹-12ç¼–å†™æ›´å°‘ç¬¦å·æå‡-f-è„šæœ¬çš„å¯é˜…è¯»æ€§>ä¾‹ 12ï¼šç¼–å†™æ›´å°‘ç¬¦å·ï¼Œæå‡ F# è„šæœ¬çš„å¯é˜…è¯»æ€§ï¼</a></li></ol></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>